{"name":"Android Host Monitor","tagline":"Easily monitor device network state and remote hosts reachability on Android","body":"[![Android Arsenal](https://img.shields.io/badge/Android%20Arsenal-Android%20Host%20Monitor-brightgreen.svg?style=flat)](http://android-arsenal.com/details/1/2626) [ ![Download](https://api.bintray.com/packages/gotev/maven/android-host-monitor/images/download.svg) ](https://bintray.com/gotev/maven/android-host-monitor/_latestVersion) [![Donate](https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=alexgotev%40gmail%2ecom&lc=US&item_name=Android%20Upload%20Service&item_number=AndroidHostMonitor&currency_code=EUR&bn=PP%2dDonationsBF%3abtn_donate_SM%2egif%3aNonHosted)\r\n\r\n## Purpose\r\nIn today's massively interconnected world, it's a common thing for an App to communicate with remote servers to provide contents and functionalities to the end user, so it's a good thing to check if the app can \"talk\" with the needed servers before doing any other network operation. Often the app has to do something based on the reachability status of a particular server or handle transitions between networks. This kind of checking can easily become a mess when we have to deal with continuous network switching (Mobile to WiFi, WiFi to Mobile, Airplane mode, no connection) and battery life! Android Host Monitor handles that for you and let you focus purely on your app's business logic.\r\n\r\n## Setup <a name=\"setup\"></a>\r\n#### Maven\r\n\r\n```\r\n<dependency>\r\n  <groupId>net.gotev</groupId>\r\n  <artifactId>hostmonitor</artifactId>\r\n  <version>2.0</version>\r\n  <type>aar</type>\r\n</dependency>\r\n```\r\n\r\n#### Gradle\r\n\r\n```\r\ndependencies {\r\n    compile 'net.gotev:hostmonitor:2.0@aar'\r\n}\r\n```\r\nand do a project sync. Check [JavaDocs](http://gotev.github.io/android-host-monitor/javadoc/) for a complete reference.\r\n\r\n## Get started\r\nConfiguring a remote host reachability check is as simple as:\r\n```java\r\nnew HostMonitorConfig(context)\r\n        .setBroadcastAction(BuildConfig.APPLICATION_ID)\r\n        .add(\"my.server.com\", 80)\r\n        .save();\r\n```\r\nYou can do that from wherever you have a `Context`. What you've done here is the following:\r\n* you've set the broadcast action used by the library to notify reachability changes. In this case you used the Gradle application ID, but you can use whatever string you want, as long as it's unique in your app.\r\n* you've added the monitoring of `my.server.com` on port `80`. The library will immediately perform a reachability check and notify you of the status. Whenever the device connectivity status changes (e.g. from WiFi to 3G, from 3G to Airplane, from no connection to 3G, ...) the library will automatically perform a reachability check in the background and will notify you only if the status has been changed from the last time you received a notification.\r\n\r\nWhen you call `save()` the settings are persisted and immediately applied.\r\n\r\nSettings survives to application restarts and android restarts, so until you want to change the host monitor configuration, you can simply start the reachability check when your app starts by invoking:\r\n```java\r\nnew HostMonitorConfig(context).save();\r\n```\r\n\r\nThe library can also automatically perform scheduled periodic reachability checks, so for example if you want to monitor your server every 15 minutes, all you have to do is:\r\n```java\r\nnew HostMonitorConfig(context).setCheckIntervalInMinutes(15).save();\r\n```\r\nBear in mind that more frequent reachability checks drains your battery faster!\r\n\r\nYou can also set other things such as socket connection timeout and maximum connection attempts before notifying failure. Check [JavaDocs](http://gotev.github.io/android-host-monitor/javadoc/).\r\n\r\n#### Unmonitor a host and port\r\n```java\r\nnew HostMonitorConfig(context).remove(\"my.server.com\", 80).save();\r\n```\r\n\r\n#### Remove all the monitored hosts\r\n```java\r\nnew HostMonitorConfig(context).removeAll().save();\r\n```\r\nWhen there are no hosts left to be monitored, the library automatically shuts down the connectivity monitoring and clears all the scheduled checks.\r\n\r\n#### Reset configuration to factory defaults\r\nIf you want to reset the persisted configuration, just invoke:\r\n```java\r\nHostMonitorConfig.reset(context);\r\n```\r\nThis will reset the configuration to factory defaults and will stop any active and scheduled network check.\r\n\r\n#### Receive reachability status changes <a name=\"receive-status\"></a>\r\nTo listen for the status, subclass `HostMonitorBroadcastReceiver`.\r\nIf you want to monitor host reachability globally in your app, all you have to do is create a new class (called `HostReachabilityReceiver` in this example):\r\n\r\n```java\r\npublic class HostReachabilityReceiver extends HostMonitorBroadcastReceiver {\r\n    @Override\r\n    public void onHostStatusChanged(HostStatus status) {\r\n        Log.i(\"HostReachability\", status.toString());\r\n    }\r\n}\r\n```\r\n\r\nand register it as a Broadcast receiver in your manifest:\r\n\r\n```xml\r\n<receiver\r\n    android:name=\".HostReachabilityReceiver\"\r\n    android:enabled=\"true\"\r\n    android:exported=\"false\" >\r\n    <intent-filter>\r\n        <action android:name=\"com.yourcompany.yourapp.reachability\" />\r\n    </intent-filter>\r\n</receiver>\r\n```\r\n\r\n`com.yourcompany.yourapp.reachability` must be the same string you set as broadcast action in the configuration, otherwise you will not receive reachability events.\r\n\r\nYou can receive status updates also in your `Activity` or `Service`. Here there is an example inside an `Activity`:\r\n\r\n```java\r\npublic class YourActivity extends Activity {\r\n\r\n    private final HostMonitorBroadcastReceiver receiver =\r\n      new HostMonitorBroadcastReceiver() {\r\n        @Override\r\n        public void onHostStatusChanged(HostStatus status) {\r\n           Log.i(\"HostMonitor\", status.toString());\r\n        }\r\n      };\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        receiver.register(this);\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        receiver.unregister(this);\r\n    }\r\n}\r\n```\r\nA partial wake lock is automatically held for the entire execution of the `onHostStatusChanged` method and is released as soon as the method returns.\r\n\r\n\r\n## Logging <a name=\"logging\"></a>\r\nBy default the library logging is disabled. You can enable debug log by invoking:\r\n```java\r\nLogger.setLogLevel(LogLevel.DEBUG);\r\n```\r\n\r\nThe library logger uses `android.util.Log`, but you can override that by providing your own logger implementation like this:\r\n```java\r\nLogger.setLoggerDelegate(new Logger.LoggerDelegate() {\r\n    @Override\r\n    public void error(String tag, String message) {\r\n        //your own implementation here\r\n    }\r\n\r\n    @Override\r\n    public void error(String tag, String message, Throwable exception) {\r\n        //your own implementation here\r\n    }\r\n\r\n    @Override\r\n    public void debug(String tag, String message) {\r\n        //your own implementation here\r\n    }\r\n\r\n    @Override\r\n    public void info(String tag, String message) {\r\n        //your own implementation here\r\n    }\r\n});\r\n```\r\n\r\n## Issues\r\nWhen you post a new issue regarding a possible bug in the library, make sure to add as many details as possible to be able to reproduce and solve the error you encountered in less time. Thank you :)\r\n\r\n## Contribute <a name=\"contribute\"></a>\r\n* Do you have a new feature in mind?\r\n* Do you know how to improve existing docs or code?\r\n* Have you found a bug?\r\n\r\nContributions are welcome and encouraged! Just fork the project and then send a pull request. Be ready to discuss your code and design decisions :)\r\n\r\n## Do you like the project? <a name=\"donate\"></a>\r\nPut a star, spread the word and if you want to offer me a free beer, [![Donate](https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=alexgotev%40gmail%2ecom&lc=US&item_name=Android%20Upload%20Service&item_number=AndroidHostMonitor&currency_code=EUR&bn=PP%2dDonationsBF%3abtn_donate_SM%2egif%3aNonHosted)\r\n\r\n## License <a name=\"license\"></a>\r\n\r\n    Copyright (C) 2015-2016 Aleksandar Gotev\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}